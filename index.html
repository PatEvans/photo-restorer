<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>photo restorer</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* Minimal layout tweaks on top of styles.css */
    .header { padding: 1.25rem 0; }
    .main { padding: 2rem 0; }
    .stack { display: grid; gap: 1rem; }
    .row { display: flex; gap: 0.75rem; align-items: center; }
    .center { display: grid; place-items: center; }
    .narrow { max-width: 880px; margin: 0 auto; }
    .upload-area { padding: 2.5rem 1.5rem; }
    .upload-content h2 { margin-bottom: 0.5rem; }
    .image-comparison { grid-template-columns: 1fr; gap: 1rem; }
    @media (min-width: 900px) { .image-comparison { grid-template-columns: 1fr 1fr; } }
    .footer { padding: 1rem 0; margin-top: 2rem; }
  </style>
</head>
<body>
  <header class="header">
    <div class="container narrow header-bar">
      <a class="logo" href="/" style="margin:0" aria-label="Go to homepage">photo restorer</a>
      <div class="header-actions">
        <div id="creditInfoTop" class="credit-badge" aria-live="polite">Checking credits‚Ä¶</div>
        <button class="btn btn-cta" id="buyBtnTop" aria-label="Buy credits">Buy Credits</button>
      </div>
    </div>
  </header>

  <main class="main">
    <div class="container narrow">
      

      <section class="upload-section">
        <div class="upload-area" id="uploadArea">
          <div class="upload-content center stack">
            <h2 id="uploadHeading" style="text-align:center;">Restore a Photo</h2>
            <p style="text-align:center;">Drop an image here or choose a file</p>
            <input type="file" id="fileInput" accept="image/*" hidden />
            <button class="upload-btn" id="uploadBtn" aria-label="Upload a Photo">Upload a Photo</button>
          </div>
        </div>
      </section>

      <section class="processing-section" id="processingSection" style="display:none;">
        <div class="processing-indicator center stack">
          <div class="spinner"></div>
          <p>Restoring your photo‚Ä¶</p>
        </div>
      </section>

      <section class="results-section" id="resultsSection" style="display:none;">
        <div class="comparison-container">
          <div class="image-comparison">
            <div class="image-side">
              <h3>Original</h3>
              <div class="image-frame"><img id="originalImage" alt="Original" /></div>
            </div>
            <div class="image-side">
              <h3>Restored</h3>
              <div class="image-frame"><img id="restoredImage" alt="Restored" /></div>
            </div>
          </div>
          <div class="actions" style="margin-top:1rem;">
            <button class="btn btn-primary icon-only" id="downloadBtn" title="Download the restored image" aria-label="Download restored image">‚¨á</button>
            <button class="btn btn-secondary" id="newPhotoBtn">New Photo</button>
          </div>
        </div>
      </section>

      <section id="recentSection" class="results-section" aria-label="Recent Images">
        <div class="row" style="justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
          <h3 style="margin:0;">Recent Images</h3>
          <div class="row" style="gap:0.5rem;">
            <button class="icon-btn square" id="recentPrev" aria-label="Previous" title="Previous">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="icon-btn square" id="recentNext" aria-label="Next" title="Next">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="btn btn-secondary" id="clearRecentBtn" title="Clear recent history">Clear History</button>
          </div>
        </div>
        <p style="color:var(--text-secondary); margin-bottom:0.75rem;">Only stored on this device. Up to 20 items.</p>
        <div id="recentGrid" class="recent-carousel"></div>
      </section>

      <section id="examplesSection" class="results-section" style="margin-top:1.5rem;">
        <h3 style="margin-bottom:0.25rem;">Examples</h3>
        <p style="color:var(--text-secondary); margin-bottom:0.75rem;">A few before/after samples to show what‚Äôs possible.</p>
        <div id="examplesGrid" class="examples-grid"></div>
      </section>
    </div>
  </main>

  <footer class="footer">
    <div class="container narrow" style="color:#ef4444;">
      <small><strong>Disclaimer:</strong> Do not upload images of minors, copyrighted images, or celebrities. Such content is not allowed and will be blocked.</small>
    </div>
  </footer>

  <script src="script.js"></script>

  <!-- Buy Credits Drawer -->
  <div id="drawerOverlay" class="drawer-overlay" hidden></div>
  <aside id="buyDrawer" class="drawer" hidden aria-hidden="true" aria-labelledby="drawerTitle">
    <div class="drawer-header">
      <h2 id="drawerTitle">Buy credits</h2>
      <button id="drawerClose" class="icon-btn" aria-label="Close">‚úï</button>
    </div>
    <div class="drawer-body">
      <div class="drawer-options">
        <button class="option" data-credits="500">
          <span class="opt-left">
            <span class="opt-title">ü™ô 500 credits</span>
            <span class="opt-sub">Enough for ~5 images</span>
          </span>
          <span class="opt-price">$2.50</span>
        </button>
        <button class="option" data-credits="1000">
          <span class="opt-left">
            <span class="opt-title">üöÄ 1000 credits</span>
            <span class="opt-sub">Enough for ~10 images</span>
          </span>
          <span class="opt-right">
            <span class="badge-popular">Popular</span>
            <span class="opt-price">$5.00</span>
          </span>
        </button>
        <button class="option" data-credits="2000">
          <span class="opt-left">
            <span class="opt-title">üèÜ 2000 credits</span>
            <span class="opt-sub">Enough for ~20 images</span>
          </span>
          <span class="opt-price">$10.00</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- Image Lightbox -->
  <div id="imageLightboxOverlay" class="lb-overlay" hidden></div>
  <div id="imageLightbox" class="lb-modal" hidden aria-hidden="true" role="dialog" aria-label="Expanded image">
    <div class="lb-topbar">
      <span id="lbLabel" class="lb-label">Image</span>
      <div class="lb-actions">
        <button id="lbDownload" class="btn btn-secondary" aria-label="Download image" title="Download image">
          <span class="icon">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M12 3a1 1 0 0 1 1 1v8.586l2.293-2.293a1 1 0 1 1 1.414 1.414l-4.002 4a1 1 0 0 1-1.414 0l-4.002-4a1 1 0 1 1 1.414-1.414L11 12.586V4a1 1 0 0 1 1-1z"></path>
              <path fill="currentColor" d="M5 20a2 2 0 0 1-2-2v-2a1 1 0 1 1 2 0v2h14v-2a1 1 0 1 1 2 0v2a2 2 0 0 1-2 2H5z"></path>
            </svg>
          </span>
          <span class="label">Download</span>
        </button>
        <button id="lbClose" class="icon-btn square lb-close" aria-label="Close" title="Close">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>
    <img id="lbImage" alt="Expanded image" />
  </div>
</body>
</html>
